## 常用的设计模式

#### 聚合组件

> 可以为复杂而功能强大的 API 提供一个或多个 facade 类型来简化其使用，这对许多特性域来说都有好处。
>
> 支持面向组件的设计的 facade 称为**聚合组件_(aggregate component)_**。

> 对聚合组件来说，更重要的是提供以中更高层的抽象，而不仅仅是提供另一种做事情的方式。

* **聚合组件是一个 facade，并满足下列条件：**
  * 构造函数：应该由默认的构造函数。
  * 构造函数：构造函数的所有参数应该与属性相对应，并用来对属性进行初始化。
  * 属性：大多数属性应该有 `getter` 和 `setter`。
  * 属性：所有属性都有合理的默认值。
  * 方法：如果参数在方法调用之前不会改变，那么方法就不应该带这样的参数。这样的选项应该通过属性来指定。
  * 事件：方法不以委托为参数。所有回调函数都通过事件来实现。

###### 面向组件的设计

> 面向组件的设计_(component-oriented design)_ 是一种设计方法，它通过类型来暴露 API，而类型则由构造函数、属性、方法和事件组成。

* ~~API 设计时应该尽量不让对象处于无效状态：~~
  * ~~将所有必需的设定作为构造函数的参数。~~
  * ~~将那些在实例化后不需要改变的设定作为只读属性。~~
  * ~~把功能划分为单独的类型，是属性和方法互不交迭。~~

* 聚合组件的设计：

  * 应该隐藏细节，不需要用户关心它背后到底做了什么。
  * 应该让用户不需要事先任何接口、修改任何配置文件等。框架的设计者应该为所有接口提供默认实现，所有的配置应该有合理的默认值，而用户可以选择是否需要设定它们。
    * 除了让开发人员编写的代码更加简单之外，还应该着眼于所有必需的常见开发任务，并考虑到工具和 IDE 能够提供的特性。
    * 框架设计者应该提供完成的端到端_(end to end)_ 的解决方案，而不仅仅只是 API。
  * 聚合组件经常会实现 IComponent 或继承自一个 UI 元素类，从而与 VS 的设计器集成在一起。

  * 通过清晰的异常信息来告诉用户对象正处于无效状态。
  * 异常应该在用户执行操作时抛出，而不应该在初始化组件时抛出。
  * 不要使用相反的模式来定义类_(Create-Call-Get)_。